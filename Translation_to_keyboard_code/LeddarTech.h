#pragma once
#ifndef LEDDARTECHH
#define LEDDARTECHH


#include "SensorBase.h"
#include <array>
#include "Logger.h"
#include <vector>
#include <string>

// start copying from leddar
#include <iostream>
#include <iomanip>
#include "LdConnectionFactory.h"
#include "LdDeviceFactory.h"
#include "LdPropertyIds.h"
#include "LdResultEchoes.h"
#include "LdSensorVu8.h"
#include "LdSpiFTDI.h"
//#include "LdLjrRecorder.h"
#include "LdRecordPlayer.h"
//USB
#include "LdLibUsb.h"
#include "LdProtocolLeddartechUSB.h"
////Utils
//#include "LtExceptions.h"
//#include "LtKeyboardUtils.h"
//#include "LtStringUtils.h"
#include "LtTimeUtils.h"


extern Logger Log1;

class LeddarTech :
	public SensorBase
{
public:
	int InitializeSensor();
	int CloseSensor();
	std::array<double, 16> GetValues();
	std::array<double, 16> CorrectionFactor = { {-0.218003187630538,-0.197842257821627,-0.167857449764861,-0.181978224909463,-0.159801543996269,-0.163312555550382,-0.16760354617581,-0.163448621533863,-0.156448621533863,-0.152174974747239,-0.159312555550382,-0.158801543996269,-0.141978224909463,-0.132857449764861,-0.185556543535913,-0.241146044773395
} }; //Meters {0.152,0.281,0.495,0.408,0.180,0.183,0.176,0.178,0.174,0.185,0.207,0.407,0.456,0.651,0.693,0.807}
	//Side  {-0.0312987635964963,-0.128228794572704,-0.311130500410793,-0.212187032742012,-0.157498233180454,-0.151092034399389,-0.149732766093701,-0.150526946362602,-0.149526946362602,-0.154732766093701,-0.156092034399389,-0.161498233180454,-0.178787032742012,-0.346530500410793,-0.292828794572704,-0.368498763596496
	// {0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0}
	// Web {-0.218003187630538,-0.197842257821627,-0.167857449764861,-0.181978224909463,-0.159801543996269,-0.163312555550382,-0.16760354617581,-0.163448621533863,-0.156448621533863,-0.152174974747239,-0.159312555550382,-0.158801543996269,-0.141978224909463,-0.132857449764861,-0.185556543535913,-0.241146044773395
	// Above {-0.167717473344823,-0.133127972107342,-0.120714592622004,-0.126978224909463,-0.113658686853412,-0.108741126978953,-0.116746403318667,-0.115734335819577,-0.109020050105292,-0.11960354617581,-0.109312555550382,-0.109801543996269,-0.0956925106237489,-0.0901431640505749,-0.118842257821627,-0.210288901916252

private:
	LeddarConnection::LdConnectionInfo* lConnectionInfo = nullptr;
	LeddarConnection::LdConnection* lConnection = nullptr;
	LeddarDevice::LdSensor* lSensor = nullptr;
};
#endif // !LEDDARTECHH
